"use strict";var e=require("./_rollupPluginBabelHelpers-764e5ec4.js"),t={load:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"//api-maps.yandex.ru/2.1/?lang=en_RU",t=function(){var t=e.match(/[\\?&]ns=([^&#]*)/);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))};return this.promise||(this.promise=new Promise((function(t,r){var n=document.createElement("script");n.onload=t,n.onerror=r,n.type="text/javascript",n.src=e,document.body.appendChild(n)})).then((function(){var e=t();return e&&"ymaps"!==e&&(0,eval)("var ymaps = ".concat(e,";")),new Promise((function(e){return ymaps.ready(e)}))}))),this.promise}},r=null;function n(e){return a.apply(this,arguments)}function a(){return(a=e._asyncToGenerator(regeneratorRuntime.mark((function n(a){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==r){n.next=5;break}return o=e._objectSpread2({YMAPS_LOAD_BY_REQUIRE:!0,YMAPS_VERSION:"2.1"},a),n.next=4,t.load("https://api-maps.yandex.ru/".concat(o.YMAPS_VERSION,"/?").concat("YMAPS_KEY"in o&&o.YMAPS_KEY.length>0?"apiKey=".concat(o.YMAPS_KEY,"&"):"").concat("YMAPS_LANG"in o?"lang=".concat(o.YMAPS_LANG):"").concat("YMAPS_LOAD_BY_REQUIRE"in o&&!0===o.YMAPS_LOAD_BY_REQUIRE?"&loadByRequire=1":""));case 4:r=n.sent;case 5:return n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var o={name:"v-ymap",render:function(e){return e("div",{class:"yandex-maps_container"},[e("div",{class:"yandex-maps",ref:"map"},[e("div",{class:"yandex-maps_slots"},[this.$slots.default])])])},props:{YMAPS_KEY:{type:String,default:""},YMAPS_LANG:{type:String,default:"ru_RU"},YMAPS_VERSION:{type:String,default:"2.1"},YMAPS_LOAD_BY_REQUIRE:{type:Boolean,default:!0},center:{type:Array,required:!0,validator:function(e){return 2===e.length&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])}},zoom:{type:Number,required:!0},behaviors:{type:Array,default:function(){return["default"]}},controls:{type:Array,default:function(){return["default"]}},margin:{type:Array,default:function(){return[]},validator:function(t){var r,n=e._createForOfIteratorHelper(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(Number.isNaN(a))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},type:{type:String,default:"yandex#map",validator:function(e){return["yandex#map","yandex#satellite","yandex#hybrid"].includes(e)}},options:{type:Object,default:function(){return{}}}},data:function(){return{maps:null,map:null}},mounted:function(){var t=this;return e._asyncToGenerator(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n({YMAPS_KEY:t.YMAPS_KEY,YMAPS_LANG:t.YMAPS_LANG,YMAPS_VERSION:t.YMAPS_VERSION,YMAPS_LOAD_BY_REQUIRE:t.YMAPS_LOAD_BY_REQUIRE});case 2:return t.maps=r.sent,t.map=new t.maps.Map(t.$refs.map,{center:t.center,zoom:t.zoom,behaviors:t.behaviors,controls:t.controls,margin:t.margin,type:t.type},e._objectSpread2({},t.options)),r.t0=t,r.next=7,t.getGeoObjects(t.maps);case 7:r.t1=r.sent,r.t0.setGeoObjects.call(r.t0,r.t1),a=e._createForOfIteratorHelper(t.$children);try{for(a.s();!(o=a.n()).done;)o.value.$on("updated",function(){var r=e._asyncToGenerator(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.getGeoObjects(t.maps);case 3:e.t1=e.sent,e.t0.setGeoObjects.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(e){return r.apply(this,arguments)}}())}catch(e){a.e(e)}finally{a.f()}case 11:case"end":return r.stop()}}),r)})))()},methods:{getGeoObjects:function(t){var r,n=[],a=e._createForOfIteratorHelper(this.$children);try{for(a.s();!(r=a.n()).done;){var o=r.value;n.push(o.getGeoObject(t))}}catch(e){a.e(e)}finally{a.f()}return Promise.all(n)},setGeoObjects:function(t){this.map.geoObjects.removeAll();var r,n=e._createForOfIteratorHelper(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;this.map.geoObjects.add(a)}}catch(e){n.e(e)}finally{n.f()}}}};exports.default=o;
